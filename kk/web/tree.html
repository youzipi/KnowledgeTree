<html>
<head>
    <script src="js/jquery.js" type="text/javascript">

    </script>
    <script>
        $(function() {
            var i =1;
            $("ul li span").live('click',function(){
                //console.log(this.attr("clicked"));
                //if(1){
                if(typeof($(this).attr("clicked"))=="undefined"){   //未生成子节点
                    $(this).after("<ul><li><span>tt</span></li></ul>");
                    //alert("hello");
                    $(this).attr("clicked","1");
                    console.log("created");
                }
                else {
                    {
                        console.log("first hide");
                        $(this).nextAll().hide();
                        console.log(i++);
                    };

                    $(this).toggle(
                            function () {
                        //$(this).animate({"marginLeft": "+=53px"}, 500);
                        $(this).nextAll().show();
                        console.log(i++);

                    },
                            function () {
                        $(this).nextAll().hide();
                        console.log(i++);

                    });
                }
            })
        })
    </script>
</head>
<body>
<ul>
    <li><span> hello</span>
        <ul>
            <li><span>world </span></li>
        </ul></li>
</ul>
</body>
</html>