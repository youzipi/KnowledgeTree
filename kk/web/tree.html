<html>
<head>
    <link href="css/themes/default/style.min.css" rel="stylesheet">
    <script src="js/jquery.js" type="text/javascript"></script>


    <script src="js/jstree.js" type="text/javascript"></script>
    <script>
        $(function() {
            $('#jstree_demo_div').jstree();
            $('#jstree').on("changed.jstree", function (e, data) {
                console.log(data.selected);
            });
            var i =1;
            $("ul li span").live('click',function(){

                if(typeof($(this).attr("clicked"))=="undefined"){   //未生成子节点
                    $(this).after("<ul><li><span>tt</span></li></ul>");
                    $(this).attr("clicked","1");
                    console.log("created");
                }
                else {
                    {
                        console.log("first hide");
                        $(this).nextAll().hide();
                        console.log(i++);
                    };

                    $(this).toggle(
                            function () {
                        //$(this).animate({"marginLeft": "+=53px"}, 500);
                        $(this).nextAll().show();
                        console.log(i++);

                    },
                            function () {
                        $(this).nextAll().hide();
                        console.log(i++);

                    });
                }
            })
        })
    </script>
</head>
<body>
<div id="jstree_demo_div">
<ul>
    <li><span level="1"> hello</span>
        <ul>
            <li><span level="1-1">world </span></li>
        </ul></li>
</ul>
</div>
</body>
</html>